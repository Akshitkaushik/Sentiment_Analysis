@startuml
skinparam ArrowThickness 4
skinparam ArrowLength 500
skinparam defaultFontSize 14
skinparam backgroundColor #FFFFFF
skinparam activityBackgroundColor #F9F9F9
skinparam activityBorderColor #CCCCCC
skinparam activityFontColor #333333

start

:Check if MTR input file is received;
if (File received?) then (yes)
  :Download the file from S3;
  :Save the file inside input folder;
else (no)
  :Send email to Business team informing file is missing;
  stop
endif

:Validate the file;
if (File empty?) then (yes)
  :Send email to user stating the file is empty;
  stop
else (no)
  :Check mandatory columns for values;
  if (Mandatory column missing?) then (yes)
    :Skip the record;
    :Continue to next record;
    stop
  else (no)
    :Proceed with the record;
    :Generate JWT token;
    :Use token to hit Service Update API with headers and body;
    :Update the status in the Excel file;
    :Continue to next record;
  endif
endif

:Share the audit file;
stop

@enduml
